module.exports=[21258,a=>{"use strict";var b=a.i(16815),c=a.i(72074),d=a.i(66181),e=a.i(24684),f=a.i(77856);function g(){let a=(0,d.createClient)(),g=(0,e.useRouter)(),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{let{data:{user:b}}=await a.auth.getUser();if(!b)return g.push("/login");q(b.id);let{data:c,error:d}=await a.from("profiles").select("*").eq("id",b.id).single();d?(console.error("Error loading profile:",d),f.toast.error("Failed to load profile")):c&&(m(c.full_name||""),o(c.avatar_url||"")),i(!1)})()},[g,a]);let r=async()=>{if(!p)return;k(!0);let b={id:p,full_name:l,avatar_url:n,updated_at:new Date().toISOString()},{error:c}=await a.from("profiles").upsert(b);c?(f.toast.error("Failed to update profile"),console.error(c)):(f.toast.success("Profile updated!"),g.refresh()),k(!1)};return h?(0,b.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:"Loading profile..."}):(0,b.jsxs)("div",{style:{maxWidth:"600px",margin:"40px auto",padding:"0 20px"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Profile"}),(0,b.jsxs)("div",{style:{background:"var(--bg-card)",padding:"30px",borderRadius:"var(--radius)",border:"1px solid var(--border-color)"},children:[(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem"},children:(0,b.jsx)("div",{style:{width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",background:"var(--bg-secondary)",border:"2px solid var(--border-color)"},children:n?(0,b.jsx)("img",{src:n,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,b.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)"},children:"No Img"})})}),(0,b.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Full Name"}),(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),placeholder:"John Doe",style:{width:"100%",padding:"10px",borderRadius:"var(--radius)",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"var(--text-primary)"}})]}),(0,b.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,b.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Avatar Image"}),(0,b.jsx)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:async b=>{if(!b.target.files||0===b.target.files.length)return;let c=b.target.files[0],d=c.name.split(".").pop(),e=`${p}-${Math.random()}.${d}`;k(!0);let{error:g}=await a.storage.from("avatars").upload(e,c);if(g){f.toast.error("Error uploading image"),console.error(g),k(!1);return}let{data:{publicUrl:h}}=a.storage.from("avatars").getPublicUrl(e);o(h),k(!1)},style:{color:"var(--text-primary)"}})}),(0,b.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Or paste a URL below:"}),(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),placeholder:"https://example.com/avatar.jpg",style:{width:"100%",padding:"10px",borderRadius:"var(--radius)",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"var(--text-primary)"}})]}),(0,b.jsx)("button",{onClick:r,className:"btn btn-primary",disabled:j,style:{width:"100%",padding:"12px"},children:j?"Saving...":"Update Profile"})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=Documents_liftlog_src_app_profile_page_tsx_813c5d7f._.js.map