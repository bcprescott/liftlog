(()=>{var e={};e.id=173,e.ids=[173],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8049:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=r(482),a=r(9108),l=r(2563),n=r.n(l),i=r(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["leaderboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,327)),"C:\\Users\\bcpre\\Documents\\liftlog\\src\\app\\leaderboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7072)),"C:\\Users\\bcpre\\Documents\\liftlog\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\bcpre\\Documents\\liftlog\\src\\app\\leaderboard\\page.tsx"],u="/leaderboard/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/leaderboard/page",pathname:"/leaderboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1475:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},3806:(e,t,r)=>{Promise.resolve().then(r.bind(r,4755)),Promise.resolve().then(r.bind(r,4157)),Promise.resolve().then(r.bind(r,7590))},5590:(e,t,r)=>{Promise.resolve().then(r.bind(r,8158))},8158:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5344),a=r(3729),l=r(3890),n=r(4123),i=r.n(n),o=r(9224);/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,o.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),c=(0,o.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),u=(0,o.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),x=(0,o.Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var h=r(4755);let m=({logId:e,userId:t})=>{let[r,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[u,x]=(0,a.useState)(""),[m,p]=(0,a.useState)(!1),f=(0,l.e)(),g=async()=>{o(!0);let{data:t}=await f.from("comments").select(`
                *,
                profiles (
                    username,
                    full_name,
                    avatar_url
                )
            `).eq("log_id",e).order("created_at",{ascending:!0});t&&n(t),o(!1)};(0,a.useEffect)(()=>{g()},[e]);let b=async r=>{if(r.preventDefault(),!t||!u.trim())return;p(!0);let{error:s}=await f.from("comments").insert({log_id:e,user_id:t,content:u.trim()});s?h.toast.error("Failed to post comment"):(x(""),g()),p(!1)},y=async e=>{if(!confirm("Are you sure you want to delete this comment?"))return;let{error:t}=await f.from("comments").delete().eq("id",e);t?h.toast.error("Failed to delete comment"):(n(r.filter(t=>t.id!==e)),h.toast.success("Comment deleted"))};return(0,s.jsxs)("div",{style:{padding:"15px",background:"var(--bg-secondary)",borderTop:"1px solid var(--border-color)"},children:[i?s.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Loading comments..."}):0===r.length?s.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"10px"},children:"No comments yet. Be the first!"}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"15px"},children:r.map(e=>(0,s.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("div",{style:{width:"30px",height:"30px",borderRadius:"50%",overflow:"hidden",background:"#333",flexShrink:0},children:e.profiles?.avatar_url&&s.jsx("img",{src:e.profiles.avatar_url,style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsxs)("div",{style:{fontSize:"0.85rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsxs)("span",{children:[e.profiles?.full_name||e.profiles?.username||"User",s.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",fontWeight:"normal",marginLeft:"8px"},children:new Date(e.created_at).toLocaleDateString()})]}),t===e.user_id&&s.jsx("button",{onClick:()=>y(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)",padding:"4px"},title:"Delete comment",children:s.jsx(d,{size:14})})]}),s.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-primary)"},children:e.content})]})]},e.id))}),t?(0,s.jsxs)("form",{onSubmit:b,style:{display:"flex",gap:"10px"},children:[s.jsx("input",{type:"text",value:u,onChange:e=>x(e.target.value),placeholder:"Write a comment...",style:{flex:1,padding:"8px",borderRadius:"4px",border:"1px solid var(--border-color)",background:"var(--bg-card)",color:"var(--text-primary)"}}),s.jsx("button",{type:"submit",disabled:m,className:"btn btn-sm",style:{display:"flex",alignItems:"center"},children:s.jsx(c,{size:16})})]}):s.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Log in to comment"})]})};function p(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)("latest"),[o,d]=(0,a.useState)([]),[c,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[b,y]=(0,a.useState)(null),v=(0,l.e)();(0,a.useEffect)(()=>{let e=async()=>{let{data:{user:e}}=await v.auth.getUser();g(e?.id||null)};(async()=>{let{data:e}=await v.from("lift_types").select("*").order("name");e&&e.length>0&&t(e)})(),e()},[]);let _=async()=>{p(!0);let e=v.from("logs").select(`
          *,
          profiles (
            username,
            full_name,
            avatar_url
          ),
          lift_types (
            name
          ),
          likes!left (
            user_id
          ),
          comments!left (
            count
          )
        `);e="latest"===r?e.order("date_logged",{ascending:!1}):e.eq("lift_type_id",parseInt(r)).order("weight",{ascending:!1});let{data:t,error:s}=await e.limit(50);t&&d(t),p(!1)};(0,a.useEffect)(()=>{_()},[r]);let j=async(e,t)=>{if(!f){h.toast.error("Please log in to like lifts");return}let r=t.some(e=>e.user_id===f);d(o.map(t=>t.id===e?{...t,likes:r?t.likes.filter(e=>e.user_id!==f):[...t.likes,{user_id:f}]}:t)),r?await v.from("likes").delete().match({user_id:f,log_id:e}):await v.from("likes").insert({user_id:f,log_id:e})};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:i().pageHeader,children:[s.jsx("h1",{children:"Leaderboard"}),(0,s.jsxs)("select",{className:i().filterSelect,value:r,onChange:e=>n(e.target.value),children:[s.jsx("option",{value:"latest",children:"Latest Lifts"}),e.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsx("div",{className:i().tableContainer,children:(0,s.jsxs)("table",{className:i().table,style:{borderCollapse:"collapse"},children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:"Rank"}),s.jsx("th",{children:"Lifter"}),s.jsx("th",{children:"Lift"}),s.jsx("th",{children:"Weight"}),s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Notes"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:c?s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{textAlign:"center"},children:"Loading..."})}):0===o.length?s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{textAlign:"center"},children:"No lifts..."})}):o.map((e,t)=>{let r=e.likes?.some(e=>e.user_id===f),a=b===e.id,l=e.comments?.[0]?.count||0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("tr",{style:{borderBottom:a?"none":"1px solid var(--border-color)"},children:[(0,s.jsxs)("td",{className:i().rank,children:["#",t+1]}),s.jsx("td",{children:(0,s.jsxs)("div",{className:i().userCell,children:[e.profiles?.avatar_url&&s.jsx("img",{src:e.profiles.avatar_url,alt:"avatar",className:i().avatar}),s.jsx("span",{children:e.profiles?.full_name||e.profiles?.username||"Anonymous"})]})}),s.jsx("td",{children:e.lift_types?.name||e.lift_name||"-"}),(0,s.jsxs)("td",{className:i().weight,children:[e.weight," ",e.unit]}),s.jsx("td",{className:i().date,children:new Date(e.date_logged).toLocaleDateString()}),s.jsx("td",{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"var(--text-secondary)"},children:e.notes||"-"}),s.jsx("td",{children:(0,s.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,s.jsxs)("button",{onClick:()=>j(e.id,e.likes||[]),style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",color:"inherit"},children:[s.jsx(u,{size:18,fill:r?"#ef4444":"none",color:r?"#ef4444":"currentColor"}),s.jsx("span",{children:e.likes?.length||0})]}),(0,s.jsxs)("button",{onClick:()=>y(a?null:e.id),style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",color:a?"var(--brand-primary)":"inherit"},children:[s.jsx(x,{size:18}),s.jsx("span",{children:l})]})]})})]},e.id),a&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{padding:0},children:s.jsx(m,{logId:e.id,userId:f})})})]})})})]})})]})}},4157:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5344),a=r(6506),l=r(3921),n=r.n(l),i=r(3890),o=r(3729),d=r(8428),c=r(8714),u=r(7180),x=r(9558);function h(){let{setTheme:e,theme:t}=(0,x.F)();return(0,s.jsxs)("button",{onClick:()=>e("light"===t?"dark":"light"),style:{background:"none",border:"1px solid var(--border)",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-primary)"},"aria-label":"Toggle theme",children:[s.jsx(c.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0",style:{display:"dark"===t?"none":"block"}}),s.jsx(u.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100",style:{display:"dark"===t?"block":"none"}})]})}function m(){let[e,t]=(0,o.useState)(null),r=(0,d.usePathname)(),l=(0,i.e)();(0,o.useEffect)(()=>{(async()=>{let{data:{user:e}}=await l.auth.getUser();t(e)})();let{data:{subscription:e}}=l.auth.onAuthStateChange((e,r)=>{t(r?.user??null)});return()=>e.unsubscribe()},[]);let c=async()=>{await l.auth.signOut(),window.location.href="/"};return(0,s.jsxs)("nav",{className:n().nav,children:[s.jsx(a.default,{href:"/",className:n().logo,children:"LiftLog"}),(0,s.jsxs)("div",{className:n().links,children:[s.jsx(h,{}),s.jsx(a.default,{href:"/dashboard",className:`${n().link} ${"/dashboard"===r?n().linkActive:""}`,children:"Dashboard"}),s.jsx(a.default,{href:"/leaderboard",className:`${n().link} ${"/leaderboard"===r?n().linkActive:""}`,children:"Leaderboard"}),e?(0,s.jsxs)(s.Fragment,{children:[s.jsx(a.default,{href:"/profile",className:`${n().link} ${"/profile"===r?n().linkActive:""}`,children:"Profile"}),s.jsx("button",{onClick:c,className:n().link,children:"Sign Out"})]}):s.jsx(a.default,{href:"/login",className:n().link,children:"Sign In"})]})]})}},7590:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ThemeProvider:()=>l});var s=r(5344);r(3729);var a=r(9558);function l({children:e,...t}){return s.jsx(a.f,{...t,children:e})}},3890:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});var s=r(4144);function a(){return(0,s.AY)("https://svqlrwwchfhyinqinbuo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN2cWxyd3djaGZoeWlucWluYnVvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2OTkxMDA2OCwiZXhwIjoyMDg1NDg2MDY4fQ.VpbGvrgtuzIuE6s_QYwsTrHWSijtSzrO7vTJcSOayx0")}},4123:e=>{e.exports={pageHeader:"leaderboard_pageHeader__bJ6EC",filterSelect:"leaderboard_filterSelect__EBI0S",tableContainer:"leaderboard_tableContainer__qsX55",table:"leaderboard_table__L202w",rank:"leaderboard_rank__zS6Dw",userCell:"leaderboard_userCell__YU5Mm",avatar:"leaderboard_avatar__FUbYo",weight:"leaderboard_weight__9U_8t",date:"leaderboard_date__GfsJP"}},3921:e=>{e.exports={nav:"Navbar_nav__A66_N",logo:"Navbar_logo__UM0Ax",links:"Navbar_links__lFeE5",link:"Navbar_link__9Nm3x",linkActive:"Navbar_linkActive__zye8w"}},7072:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,metadata:()=>m});var s=r(5036);r(5023);var a=r(6843);let l=(0,a.createProxy)(String.raw`C:\Users\bcpre\Documents\liftlog\src\components\Navbar.tsx`),{__esModule:n,$$typeof:i}=l,o=l.default;var d=r(7171);let c=(0,a.createProxy)(String.raw`C:\Users\bcpre\Documents\liftlog\src\components\ThemeProvider.tsx`),{__esModule:u,$$typeof:x}=c;c.default;let h=(0,a.createProxy)(String.raw`C:\Users\bcpre\Documents\liftlog\src\components\ThemeProvider.tsx#ThemeProvider`),m={title:"LiftLog",description:"Track your lifts and compete with friends."};function p({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:(0,s.jsxs)(h,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[(0,s.jsxs)("main",{className:"container",children:[s.jsx(o,{}),e]}),s.jsx(d.x7,{position:"top-center"})]})})})}},327:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let s=(0,r(6843).createProxy)(String.raw`C:\Users\bcpre\Documents\liftlog\src\app\leaderboard\page.tsx`),{__esModule:a,$$typeof:l}=s,n=s.default},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[225,287],()=>r(8049));module.exports=s})();