(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8849,e=>{"use strict";var r=e.i(10551),t=e.i(92361),a=e.i(2606),i=e.i(18511),o=e.i(41248);function l(){let e=(0,a.createClient)(),l=(0,i.useRouter)(),[s,d]=(0,t.useState)(!0),[n,p]=(0,t.useState)(!1),[c,u]=(0,t.useState)(""),[g,m]=(0,t.useState)(""),[h,x]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{let{data:{user:r}}=await e.auth.getUser();if(!r)return l.push("/login");x(r.id);let{data:t,error:a}=await e.from("profiles").select("*").eq("id",r.id).single();a?(console.error("Error loading profile:",a),o.toast.error("Failed to load profile")):t&&(u(t.full_name||""),m(t.avatar_url||"")),d(!1)})()},[l,e]);let v=async()=>{if(!h)return;p(!0);let r={id:h,full_name:c,avatar_url:g,updated_at:new Date().toISOString()},{error:t}=await e.from("profiles").upsert(r);t?(o.toast.error("Failed to update profile"),console.error(t)):(o.toast.success("Profile updated!"),l.refresh()),p(!1)};return s?(0,r.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:"Loading profile..."}):(0,r.jsxs)("div",{style:{maxWidth:"600px",margin:"40px auto",padding:"0 20px"},children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Profile"}),(0,r.jsxs)("div",{style:{background:"var(--bg-card)",padding:"30px",borderRadius:"var(--radius)",border:"1px solid var(--border-color)"},children:[(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem"},children:(0,r.jsx)("div",{style:{width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",background:"var(--bg-secondary)",border:"2px solid var(--border-color)"},children:g?(0,r.jsx)("img",{src:g,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,r.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)"},children:"No Img"})})}),(0,r.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Full Name"}),(0,r.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"John Doe",style:{width:"100%",padding:"10px",borderRadius:"var(--radius)",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"var(--text-primary)"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Avatar Image"}),(0,r.jsx)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:async r=>{if(!r.target.files||0===r.target.files.length)return;let t=r.target.files[0],a=t.name.split(".").pop(),i=`${h}-${Math.random()}.${a}`;p(!0);let{error:l}=await e.storage.from("avatars").upload(i,t);if(l){o.toast.error("Error uploading image"),console.error(l),p(!1);return}let{data:{publicUrl:s}}=e.storage.from("avatars").getPublicUrl(i);m(s),p(!1)},style:{color:"var(--text-primary)"}})}),(0,r.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Or paste a URL below:"}),(0,r.jsx)("input",{type:"text",value:g,onChange:e=>m(e.target.value),placeholder:"https://example.com/avatar.jpg",style:{width:"100%",padding:"10px",borderRadius:"var(--radius)",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"var(--text-primary)"}})]}),(0,r.jsx)("button",{onClick:v,className:"btn btn-primary",disabled:n,style:{width:"100%",padding:"12px"},children:n?"Saving...":"Update Profile"})]})]})}e.s(["default",()=>l])}]);