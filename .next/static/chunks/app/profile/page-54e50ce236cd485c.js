(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{4811:function(e,r,t){Promise.resolve().then(t.bind(t,2509))},7907:function(e,r,t){"use strict";var a=t(5313);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},2509:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return s}});var a=t(3827),i=t(4090),o=t(1097),n=t(7907),l=t(6288);function s(){let e=(0,o.e)(),r=(0,n.useRouter)(),[t,s]=(0,i.useState)(!0),[d,u]=(0,i.useState)(!1),[c,p]=(0,i.useState)(""),[g,h]=(0,i.useState)(""),[m,f]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{let{data:{user:t}}=await e.auth.getUser();if(!t){r.push("/login");return}f(t.id);let{data:a,error:i}=await e.from("profiles").select("*").eq("id",t.id).single();i?(console.error("Error loading profile:",i),l.toast.error("Failed to load profile")):a&&(p(a.full_name||""),h(a.avatar_url||"")),s(!1)})()},[r,e]);let x=async()=>{if(!m)return;u(!0);let t={id:m,full_name:c,avatar_url:g,updated_at:new Date().toISOString()},{error:a}=await e.from("profiles").upsert(t);a?(l.toast.error("Failed to update profile"),console.error(a)):(l.toast.success("Profile updated!"),r.refresh()),u(!1)};return t?(0,a.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:"Loading profile..."}):(0,a.jsxs)("div",{style:{maxWidth:"600px",margin:"40px auto",padding:"0 20px"},children:[(0,a.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"2rem"},children:"Profile"}),(0,a.jsxs)("div",{style:{background:"var(--bg-card)",padding:"30px",borderRadius:"var(--radius)",border:"1px solid var(--border-color)"},children:[(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem"},children:(0,a.jsx)("div",{style:{width:"100px",height:"100px",borderRadius:"50%",overflow:"hidden",background:"var(--bg-secondary)",border:"2px solid var(--border-color)"},children:g?(0,a.jsx)("img",{src:g,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,a.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)"},children:"No Img"})})}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Full Name"}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>p(e.target.value),placeholder:"John Doe",style:{width:"100%",padding:"10px",borderRadius:"var(--radius)",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"var(--text-primary)"}})]}),(0,a.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Avatar Image"}),(0,a.jsx)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:async r=>{if(!r.target.files||0===r.target.files.length)return;let t=r.target.files[0],a=t.name.split(".").pop(),i="".concat(m,"-").concat(Math.random(),".").concat(a);u(!0);let{error:o}=await e.storage.from("avatars").upload(i,t);if(o){l.toast.error("Error uploading image"),console.error(o),u(!1);return}let{data:{publicUrl:n}}=e.storage.from("avatars").getPublicUrl(i);h(n),u(!1)},style:{color:"var(--text-primary)"}})}),(0,a.jsx)("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:"Or paste a URL below:"}),(0,a.jsx)("input",{type:"text",value:g,onChange:e=>h(e.target.value),placeholder:"https://example.com/avatar.jpg",style:{width:"100%",padding:"10px",borderRadius:"var(--radius)",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"var(--text-primary)"}})]}),(0,a.jsx)("button",{onClick:x,className:"btn btn-primary",disabled:d,style:{width:"100%",padding:"12px"},children:d?"Saving...":"Update Profile"})]})]})}},1097:function(e,r,t){"use strict";t.d(r,{e:function(){return i}});var a=t(101);function i(){return(0,a.AY)("https://svqlrwwchfhyinqinbuo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN2cWxyd3djaGZoeWlucWluYnVvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2OTkxMDA2OCwiZXhwIjoyMDg1NDg2MDY4fQ.VpbGvrgtuzIuE6s_QYwsTrHWSijtSzrO7vTJcSOayx0")}}},function(e){e.O(0,[101,288,971,69,744],function(){return e(e.s=4811)}),_N_E=e.O()}]);